<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¹€ì„ ê²½ - ê°€ìœ„ë°”ìœ„ë³´</title>
</head>
<body>
</body>

<script>
const rpsArr = ['ê°€ìœ„', 'ë°”ìœ„', 'ë³´'];
const scoreObj = {
    player1: 0,
    player2: 0,
    player3: 0,
};

// ëœë¤ ê°€ìœ„ë°”ìœ„ë³´ ëŒë¦¬ê¸°
const getRandom = (arr) => {
    return arr[Math.floor(Math.random() * arr.length)];
}

// 10ë²ˆì˜ ìŠ¹ë¥ ì´ ë‚ ë•Œê¹Œì§€ ê²Œì„ ë°˜ë³µ
let gameCount = 0;
while (gameCount < 10) {
    // ëœë¤ ê°€ìœ„ë°”ìœ„ë³´
    const player1Hand = getRandom(rpsArr);
    const player2Hand = getRandom(rpsArr);
    const player3Hand = getRandom(rpsArr);

    let tempWinner;
    let tempWinnerHand;
    let finalWinner;

    // ì²«ë²ˆì§¸ ê²Œì„ (player1 vs player2)
    if (player1Hand === player2Hand) { // ë¹„ê¹€
        continue;
    }

    if ((player1Hand === 'ê°€ìœ„' && player2Hand === 'ë³´') ||
        (player1Hand === 'ë°”ìœ„' && player2Hand === 'ê°€ìœ„') ||
        (player1Hand === 'ë³´' && player2Hand === 'ë°”ìœ„')) 
    {
        tempWinner = 'player1';
        tempWinnerHand = player1Hand;
    } else {
        tempWinner = 'player2';
        tempWinnerHand = player2Hand;
    }

    // ê²°ìŠ¹ì „ ê²Œì„ (tempWinner vs player3)
    if (tempWinnerHand === player3Hand) { // ë¹„ê¹€
        continue;
    } 

    if (
        (tempWinnerHand === 'ê°€ìœ„' && player3Hand === 'ë³´') ||
        (tempWinnerHand === 'ë°”ìœ„' && player3Hand === 'ê°€ìœ„') ||
        (tempWinnerHand === 'ë³´' && player3Hand === 'ë°”ìœ„')
    ) {
        finalWinner = tempWinner;
    } else {
        finalWinner = 'player3';
    }

    // ìµœì¢… ìš°ìŠ¹
    scoreObj[finalWinner]++;
    gameCount++;
}

console.log('ğŸ‘‘ ìµœì¢… ê²°ê³¼ : ', scoreObj);

// ìµœë‹¤ ìš°ìŠ¹ì
const scoreArr = Object.entries(scoreObj);
scoreArr.sort((a, b) => b[1] - a[1]);

const sortedObj = Object.fromEntries(scoreArr);

console.log('ğŸ‘‘ ì ìˆ˜ ë†’ì€ ìˆœ : ', sortedObj);

const topWinner = scoreArr[0][0];
const topScore = scoreArr[0][1];

if (scoreArr[0][1] === scoreArr[1][1]) {
    let sameWinner = scoreArr[1][0];
    console.log(`ğŸ‘‘ ìµœë‹¤ ìš°ìŠ¹ì (ê³µë™ ìš°ìŠ¹) : ${topWinner}, ${sameWinner}`);
} else {
    console.log(`ğŸ‘‘ ìµœë‹¤ ìš°ìŠ¹ì : ${topWinner}`);
}
</script>
</html>